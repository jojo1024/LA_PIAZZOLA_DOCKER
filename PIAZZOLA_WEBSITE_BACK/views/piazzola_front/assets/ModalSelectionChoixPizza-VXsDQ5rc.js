import{j as s,m as g,w as i,W as f,r as u,u as M,g as w}from"./vendor-gpPvsGIM.js";import{L as V,l as A,f as R,m as W,n as O,o as b,q as Z,p as H,t as J,u as F,c as K,v as Q,D as U,i as X,w as Y}from"./index-BedEYsRv.js";import _ from"./Textarea-DX1pZtWJ.js";const c=({categoriesState:e,setCategoriesState:p,data:a,libelle:m,keys:t,containerClassname:j})=>{const x=(n,l)=>{p(n?[...e,l]:e.filter(d=>d[t[0]]!==l[t[0]]))};return s.jsxs("div",{className:`flex flex-col  ${j}`,children:[s.jsx(V,{className:"text-sm text-left w-24",children:m}),s.jsx(g,{className:"relative",children:({open:n})=>s.jsxs(s.Fragment,{children:[s.jsxs(g.Button,{className:`flex w-full  justify-between px-4 py-3.5 text-sm rounded-2xl border focus:outline-none select-none ${n?"!border-primary-500 ":"border-neutral-300 dark:border-neutral-700"} ${e.length?"!border-primary-500 bg-primary-50 text-primary-900":"border-neutral-300 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:border-neutral-400 dark:hover:border-neutral-500"}`,children:[s.jsx("div",{className:"",children:e.map(l=>l[t[1]]).join(", ")}),s.jsx("div",{className:"",children:s.jsx(i,{className:"w-4 h-4 ml-3"})})]}),s.jsx(f,{as:u.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:s.jsx(g.Panel,{className:"absolute z-40 w-screen bottom-full max-w-sm px-4 mt-3 left-0 sm:px-0 lg:max-w-96",children:s.jsx("div",{className:"overflow-y-auto h-52 rounded-xl shadow-xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700",children:s.jsx("div",{className:"relative flex flex-col px-5 py-6 space-y-5",children:a.map(l=>s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-left  text-gray-900 dark:text-gray-100 mb-4",children:l.label}),l.data.map(d=>s.jsx("div",{className:"flex items-center mb-4",children:s.jsx(A,{name:d[t[0]],label:`${d[t[1]]}... ${R(d.prixSupplement)}`,onChange:o=>x(o,d),defaultChecked:e.filter(o=>o[t[0]]===d[t[0]]).length!==0})},d[t[0]]))]},l.label))})})})})]})})]})},z=({show:e,onCloseModalQuickView:p,choixPizzaSelectionnee:a,handleChange:m,setCommandeBoisson:t,commandeBoisson:j,setCommandeSupplement:x,commandeSupplement:n,setCommandeCondiment:l,commandeCondiment:d,setChoixPizzaSelectionnee:o,onButtonAddClick:N,buttonTitle:I})=>{const{pizzaFormat:k,condiment:q,pate:T,viande:B,boisson:D,supplement:C}=M(r=>r.pizzaAccompagnement),G=u.useMemo(()=>W(C),[C]),[v,y]=u.useState({}),$=k.filter(r=>r.pizzaId===a.pizzaId),E=()=>{try{Q.parse({quantiteCommande:a.quantiteCommande,pizzaFormatId:a.pizzaFormatId,pateId:a.pateId}),y({}),N(),U({libelle:"Pizza ajoutée avec succès !",type:"success",time:1e3}),o(X),p()}catch(r){const L=Y(r);y(L)}};return s.jsx(f,{appear:!0,show:e,as:u.Fragment,children:s.jsx(w,{as:"div",className:"fixed inset-0 z-50",onClose:p,children:s.jsxs("div",{className:"flex items-stretch md:items-center justify-center h-full text-center md:px-4",children:[s.jsx(f.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx(w.Overlay,{className:"fixed inset-0 bg-black/40 dark:bg-black/70"})}),s.jsx("span",{className:"inline-block align-middle","aria-hidden":"true",children:"​"}),s.jsx(f.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsx("div",{className:"relative inline-flex xl:py-8 w-full max-w-lg max-h-full ",children:s.jsxs("div",{className:`flex-1 bg-white  overflow-hidden max-h-full  w-full  align-middle transition-all transform lg:rounded-2xl  \r
              dark:bg-neutral-900 dark:border dark:border-slate-700 dark:text-slate-100 shadow-xl`,children:[s.jsxs("div",{className:"bg-red-600 py-4",children:[s.jsx("span",{className:"absolute right-3 top-3 z-50",children:s.jsx(O,{onClick:p,color:"white"})}),s.jsx("div",{className:"text-xl text-white",children:a==null?void 0:a.nomPizza}),s.jsx("div",{className:"text-sm text-white mx-2",children:a==null?void 0:a.descriptionPizza})]}),s.jsxs("div",{className:" overflow-y-auto  h-[500px] lg:h-[450px] xl:[550px] 2xl:h-[570px]  p-8 rounded-xl",children:[s.jsx(b,{containerClassname:"mb-4 flex-col lg:flex-row lg:items-center",textClassname:"w-32",label:"Quantité",id:"quantiteCommande",valuesSelected:(a==null?void 0:a.quantiteCommande)||"",onChange:r=>m(r),data:Z,keys:["idQuantiteCommande","quantiteCommande"],error:v.quantiteCommande,required:!0}),s.jsx(b,{containerClassname:"mb-4 flex-col lg:flex-row lg:items-center",textClassname:"w-32",label:"Format",id:"pizzaFormatId",valuesSelected:(a==null?void 0:a.pizzaFormatId)||"",onChange:r=>m(r),data:$,keys:["pizzaFormatId","nomFormat","prixPizzaFormat"],error:v.pizzaFormatId,required:!0,disabled:!!(a!=null&&a.pizzaGratos)}),s.jsx(b,{containerClassname:"mb-4 flex-col lg:flex-row lg:items-center",textClassname:"w-32",label:"Pâtes",id:"pateId",valuesSelected:(a==null?void 0:a.pateId)||"",onChange:r=>m(r),data:T,keys:["pateId","nomPate"],error:v.pateId,required:!0}),H.includes((a==null?void 0:a.choixViande)||"")?s.jsx(b,{containerClassname:"mb-4 flex-col lg:flex-row lg:items-center",textClassname:"w-32",label:`${J[a==null?void 0:a.choixViande]}`,id:"viandeId",valuesSelected:(a==null?void 0:a.viandeId)||"",onChange:r=>m(r),data:B,keys:["viandeId","nomViande"],required:!0}):null,!(a!=null&&a.pizzaGratos)&&s.jsx(F,{setCategoriesState:l,categoriesState:d,data:q,libelle:"Condiments",keys:["condimentId","nomCondiment"],containerClassname:"mb-4"}),!(a!=null&&a.pizzaGratos)&&s.jsx(F,{setCategoriesState:t,categoriesState:j,data:D,libelle:"Boissons",keys:["boissonId","nomBoisson","prixBoisson"],containerClassname:"mb-4",disabled:!!(a!=null&&a.pizzaGratos)}),!(a!=null&&a.pizzaGratos)&&s.jsx(c,{data:G,libelle:"Suppléments",keys:["supplementId","nomSupplement"],containerClassname:"mb-4",categoriesState:n,setCategoriesState:x}),s.jsx(_,{name:"demandeSpeciale",maxLength:70,value:(a==null?void 0:a.demandeSpeciale)||"",onChange:r=>m({demandeSpeciale:r.target.value}),placeholder:"Demande spéciale hors supplements",rows:3})]}),s.jsx("div",{className:"m-4 z-0",children:s.jsx(K,{onClick:()=>E(),title:I,width:"w-full",classname:""})})]})})})]})})})};export{z as default};
